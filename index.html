<!DOCTYPE html>
<html>

<head>
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <title>Marilyn Producciones</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--<link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">-->
    <link rel="stylesheet" type="text/css" href="lib/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="social-button.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>-->
    <script src="lib/jquery.min.js"></script>
    <script src="parallax.js"></script>
    <script src="lazysizes.min.js" async=""></script>
    <link rel="icon" type="image/png" href="icon.png" />
</head>

<body>
    <div class="menu-shadow"></div>
    <header class="body_header">
        <a href="#" class="menu-icon-toggle"><span></span></a>
        <nav>
            <ul>
                <li><a data-hash="/" title="Inicio">Inicio</a></li>
                <li><a data-hash="/home_sobremi" title="Sobre Mi">Sobre Mi</a></li>
                <!--<li><a href="#" title="Info">Info</a></li>-->
            </ul>
            <div class="logo"></div>
            <ul>
                <!--<li><a href="#" title="Albunes">Albunes</a></li>-->
                <li><a data-hash="/home_contact" title="Contacto">Contacto</a></li>
                <li><a href="#" title="Facebook">Facebook</a></li>
                <!--<li><a href="#" title="...">...</a></li>-->
            </ul>
        </nav>
    </header>
    <content>
    </content>
    <footer>
        <!--<div class="social-buttons">
            <a class="social-button facebook" href="https://www.facebook.com/pg/Marilyn-Producciones-Fotografía-y-Video-854433377954665">
                <i class="fa fa-facebook"></i>
            </a>
            <a class="social-button google" href="#">
                <i class="fa fa-youtube"></i>
            </a>
            <a class="social-button google" href="#">~~
                <i class="fa fa-envelope"></i>
            </a>
        </div>-->
    
    </footer>

<script>
function Utils() {

}
//http://stackoverflow.com/questions/487073/check-if-element-is-visible-after-scrolling
Utils.prototype = {
    constructor: Utils,
    isElementInView: function (element, fullyInView) {
        var pageTop = $(window).scrollTop();
        var pageBottom = pageTop + $(window).height();
        var elementTop = $(element).offset().top;
        var elementBottom = elementTop + $(element).height();

        if (fullyInView === true) {
            return ((pageTop < elementTop) && (pageBottom > elementBottom));
        } else {
            return ((elementTop <= pageBottom) && (elementBottom >= pageTop));
        }
    }
};

var Utils = new Utils();
</script>
<script>
function copyToClipboard(element) {
    var $temp = $("<input>");
    $("body").append($temp);
    $temp.val($(element).text()).select();
    document.execCommand("copy");
    $temp.remove();
}
//var router = new Navigo(undefined, true);
function updatePageLinks() {
    $('[data-hash]').on('click', function(){
        location.hash = $(this).data('hash');
        route();
    })
}
updatePageLinks();
var loaded = "";
function load(a, selector) {
    $('body').removeClass('open');
    if (loaded == a) {
        goto(selector !== undefined ? selector : 'body');
        return
    }
    loaded = a;
    $('content').load(a, function() {
        //router.updatePageLinks();
        updatePageLinks();
        setTimeout(function() {
            goto(selector !== undefined ? selector : 'body');
        }, 500);
    });
}
//load(location.hash.slice(1) + '.html')
function athome(){
    //return ['/', 'sobremi', 'contact'].some((e) => location.hash.includes(e));
    return !location.hash.includes('album')
}

var reset_hash = false;
function goto(selector) {
    reset_hash = true;
    //stop() http://stackoverflow.com/questions/21786027/jquery-scrolltop-being-buggy
    // weeiiirddd!!
    $('html, body').stop().animate({
        scrollTop: $(selector).offset().top
    }, 1000);
}
$(document).scroll(function(){
    if (!athome())
        return
    if(Utils.isElementInView($('section.portada'), false))
        location.hash = "/";
    else if(Utils.isElementInView($('#sobremi'), false))
        location.hash = '/home_sobremi';
    else if(Utils.isElementInView($('#contact'), false))
        location.hash = '/home_contact';
    else 
        location.hash = "/";
})

locations = {
        '': function() {
            load('home.html');
        },
        '/': function() {
            load('home.html');
        },
        '/home_sobremi': function() {
            load('home.html', '#sobremi');
        },
        '/home_contact': function() {
            load('home.html', '#contact');
        }
    }

function route() {
    //debugger;
    if (location.hash.slice(1) in locations)
        locations[location.hash.slice(1)]()
    else if(location.hash.slice(1).startsWith('/album:'))
        load('album.html')
}
route()

$('.menu-icon-toggle').on('click', function(e) {
    $('body').toggleClass('open');

    e.preventDefault();
});

/*$(document).scroll(function() {
    $('#menu').toggle($(this).scrollTop()>1000)
 });​ */
</script>
</body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-93049227-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
